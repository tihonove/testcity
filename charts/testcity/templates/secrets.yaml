apiVersion: v1
kind: Secret
metadata:
  name: gitlab-credentials
  labels:
    {{- include "testcity.labels" . | nindent 4 }}
type: Opaque
stringData:
  token: {{ .Values.secrets.gitlab.token | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: oltp-headers
  labels:
    {{- include "testcity.labels" . | nindent 4 }}
type: Opaque
stringData:
  value: {{ .Values.secrets.otlp.headers | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: clickhouse-credentials
  labels:
    {{- include "testcity.labels" . | nindent 4 }}
type: Opaque
stringData:
  user: {{ .Values.secrets.clickhouse.user | quote }}
  password: {{ .Values.secrets.clickhouse.password | quote }}
---
{{- if or (eq .Values.authorization.type "OpenIdConnect") (eq .Values.authorization.type "OpenIdConnectWithCerberus") }}
apiVersion: v1
kind: Secret
metadata:
  name: oidc-credentials
  labels:
    {{- include "testcity.labels" . | nindent 4 }}
type: Opaque
stringData:
  clientId: {{ .Values.secrets.oidc.clientId | quote }}
  clientSecret: {{ .Values.secrets.oidc.clientSecret | quote }}
{{- end }}
---
{{- if eq .Values.authorization.type "OpenIdConnectWithCerberus" }}
apiVersion: v1
kind: Secret
metadata:
  name: cerberus-credentials
  labels:
    {{- include "testcity.labels" . | nindent 4 }}
type: Opaque
stringData:
  apiKey: {{ .Values.secrets.cerberus.apiKey | quote }}
{{- end }}
