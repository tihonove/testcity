# TestCity ![Docker Image Version](https://img.shields.io/docker/v/tihonove/testcity)

Инструмент для мониторинга и аналитики тестов, аналогичный TeamCity. TestCity интегрируется с GitLab для отслеживания и анализа запусков тестов, обеспечивая наглядную визуализацию результатов тестирования.

## Основные возможности

- Иерархия: организация по командам, проектам и группам как в GitLab
- Отображение запусков тестов как в TeamCity:
  - Выбор ветки для анализа
  - История запусков тестов 
  - Графики времени выполнения и падений тестов
  - TODO: Отслеживание трендов выполнения
  - TODO: Анализ стабильности тестов

### Важная информация:

- Чтобы тесты были видны за пределами GitLab, они должны попадать в артефакты, а не только в JUnit report. (Подробнее см. [документацию GitLab](https://docs.gitlab.com/api/job_artifacts/#downloading-artifactsreports-files).)
- Если ваш проект должен быть доступен для чтения системной учетной записи, необходимо будет выдать доступ учетной записи, под которой работает сервис (уточняте у системного админстратора).

После добавления TestCity начнет сканировать указанный проект и собирать данные о тестах.

## Архитектура

Test City состоит из нескольких компонентов:
- Краулер: собирает данные из GitLab, для проектов которые не работает через webhooks
- Воркер: извлекает данные из GitLab, включая артефакты тестов
- База данных (ClickHouse): хранит структурированные данные тестов
- API: проксирует запросы от фронтенда к базе данных/GitLab
- Фронтенд: веб-интерфейс для доступа к аналитике, с запросами прямо на страницах

## Как разрабатывать

Для разработки и запуска TestCity локально, ознакомьтесь с [руководством для контрибьюторов](DEVGUIDE.md).

Проект поддерживает разработку с использованием DevContainer, что позволяет быстро настроить среду разработки без установки зависимостей локально. Подробности в [руководстве](DEVGUIDE.md).

Краткая информация по запуску:

### Режим полного окружения
```bash
# Запустить все компоненты: БД, API и фронтенд
./start-all.sh
```

### Режим только фронтенда
```bash
# Перейти в директорию фронтенда
cd Front

# Запустить фронтенд с подключением к рабочему API
npm run start-prod-api
```

После запуска веб-интерфейс будет доступен по адресу: http://localhost:8080

## Системные требования 

- Node.js 20+
- .NET 9 SDK
- Docker
- taskfile.dev

или можно использовать DevContainer. 

## Поддержка

Для сообщений о проблемах или предложений используйте наш [Issue Tracker](https://github.com/tihonove/testcity/issues) в github.